<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>toDoList</title>
</head>
<link rel="stylesheet" href="./src/iconfont/iconfont.css">
<link rel="stylesheet" href="./src/style.css">

<body>
    <header>
        <input id='input' type="text" placeholder="Input something to do next...">
        <button id='addItem'></button>
    </header>
    <h4>toDoList</h4>
    <ul class='list toDo'>
    </ul>
    <h4>finishList</h4>
    <ul class='list finish'></ul>
</body>
<script>
var toDoList = function() {
    var input;
    var btnAdd;
    var toDoList;
    var finishList;

    (function init() {
        btnAdd = document.querySelector('#addItem');
        input = document.querySelector('#input');
        toDoList = document.querySelector('.toDo');
        finishList = document.querySelector('.finish');
        bindEvents();
    })();

    function bindEvents() {
        btnAdd.addEventListener('click', function() {
            var str = input.value;
            var newItem = document.createElement('li');
            newItem.innerHTML = str + `<div class='buttons'>
            <button class='del' ><i class='iconfont icon-error'></i> </button>
            <button class='fin'><i class='iconfont icon-right'></i></button>
          </div>`;
            newItem.querySelector('.del').addEventListener('click', deleteItem);
            newItem.querySelector('.fin').addEventListener('click', finishItem);
            if(toDoList.children.length){
                toDoList.insertBefore(newItem,toDoList.children[0]);
            }else{
            toDoList.appendChild(newItem);

            }
        })
    }

    function deleteItem() {
        event.preventDefault();
        var item = this.parentNode.parentNode;
        toDoList.removeChild(item);
    }

    function finishItem() {
        event.preventDefault();
        var item = this.parentNode.parentNode;
        var newItem = createItem(item.innerHTML);
        finishList.appendChild(newItem);
        toDoList.removeChild(item);
    }

    function createItem(innerHTML) {
        var newItem = document.createElement('li');
        newItem.innerHTML = innerHTML;
        return newItem;
    }
}();
</script>

</html>
